# -----------------------------------------------------------------------------
# ìž‘ì„±ìž : í•œì¤€êµ
# ìž‘ì„±ëª©ì  : ì œë„ˆë ˆì´í„° ë¡œì§ ì‘ìš© (ì§ìˆ˜ ì œê³±) ë° ì„±ëŠ¥(ì†ë„, ë©”ëª¨ë¦¬) ë¹„êµ ë¶„ì„
# ìž‘ì„±ì¼ : 2026-01-12
#
# ë³¸ íŒŒì¼ì€ KDT êµìœ¡ì„ ìœ„í•œ Sample ì½”ë“œì´ë¯€ë¡œ ìž‘ì„±ìžì—ê²Œ ëª¨ë“  ì €ìž‘ê¶Œì´ ìžˆìŠµë‹ˆë‹¤.
#
# [ë³€ê²½ì´ë ¥]
# 2026-01-12 : ì´ˆê¸° í…œí”Œë¦¿ ìž‘ì„±
# 2026-01-12 : ì§ìˆ˜ë§Œ ì œê³±í•˜ì—¬ ë°˜í™˜í•˜ëŠ” ì œë„ˆë ˆì´í„°(even_square_gen) í•¨ìˆ˜ êµ¬í˜„
# 2026-01-12 : time ëª¨ë“ˆì„ í™œìš©í•œ ë¦¬ìŠ¤íŠ¸ vs ì œë„ˆë ˆì´í„° ì²˜ë¦¬ ì†ë„ ë¹„êµ ë¡œì§ ì¶”ê°€
# -----------------------------------------------------------------------------

# [Imports]
import sys 
import time

# -----------------------------------------------------------------------------
# [Data Definition]
# -----------------------------------------------------------------------------
TARGET_N = 1_000_000  # 0ë¶€í„° 100ë§Œê¹Œì§€ íƒìƒ‰


# -----------------------------------------------------------------------------
# [Helper Functions]
# -----------------------------------------------------------------------------

def print_section_title(title):
    """
    ì„¹ì…˜ êµ¬ë¶„ì„ ìœ„í•œ ì¶œë ¥ í•¨ìˆ˜ìž…ë‹ˆë‹¤.
    """
    print(f"\n" + "="*60)
    print(f" [Step] {title}")
    print("="*60)


def get_memory_usage(obj):
    """
    ê°ì²´ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ MB ë‹¨ìœ„ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
    """
    size_bytes = sys.getsizeof(obj)
    return size_bytes / (1024 * 1024)  # MB ë‹¨ìœ„ ë³€í™˜


# -----------------------------------------------------------------------------
# [Business Logic Functions]
# -----------------------------------------------------------------------------

def create_even_square_list(n):
    """
    [ë¹„êµêµ°] ë¦¬ìŠ¤íŠ¸ ë°©ì‹
    0ë¶€í„° n-1ê¹Œì§€ì˜ ì§ìˆ˜ë¥¼ ì°¾ì•„ ì œê³±í•œ ê°’ì„ 'ë¦¬ìŠ¤íŠ¸'ì— ëª¨ë‘ ë‹´ì•„ ë°˜í™˜í•©ë‹ˆë‹¤.
    (ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ í¼)
    
    Args:
        n (int): íƒìƒ‰ ë²”ìœ„
        
    Returns:
        list: ì§ìˆ˜ ì œê³±ê°’ë“¤ì˜ ë¦¬ìŠ¤íŠ¸
    """
    # ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜ ì‚¬ìš© (ì¦‰ì‹œ ìƒì„±)
    return [i**2 for i in range(n) if i % 2 == 0]


def even_square_gen(n):
    """
    [ì‹¤ìŠµ ê³¼ì œ 1] ì œë„ˆë ˆì´í„° ë°©ì‹
    0ë¶€í„° n-1ê¹Œì§€ì˜ ì§ìˆ˜ë¥¼ ì°¾ì•„ ì œê³±í•œ ê°’ì„ í•˜ë‚˜ì”© ìƒì„±(Yield)í•©ë‹ˆë‹¤.
    (ë©”ëª¨ë¦¬ íš¨ìœ¨ì )
    
    Args:
        n (int): íƒìƒ‰ ë²”ìœ„
        
    Yields:
        int: ì§ìˆ˜ì˜ ì œê³±ê°’
    """
    for i in range(n):
        if i % 2 == 0:     # ì§ìˆ˜ì¸ì§€ í™•ì¸
            yield i ** 2   # ì¡°ê±´ì— ë§žìœ¼ë©´ ì œê³±í•˜ì—¬ ì „ë‹¬í•˜ê³  ëŒ€ê¸°


# -----------------------------------------------------------------------------
# [Main Execution Flow]
# -----------------------------------------------------------------------------
if __name__ == "__main__":
    print(f">>> í”„ë¡œê·¸ëž¨ ì‹¤í–‰ ì‹œìž‘ (íƒìƒ‰ ë²”ìœ„: 0 ~ {TARGET_N:,})")

    # ---------------------------------------------------------
    # 1. ì¼ë°˜ ë¦¬ìŠ¤íŠ¸(List) ë°©ì‹ ì„±ëŠ¥ ì¸¡ì •
    # ---------------------------------------------------------
    print_section_title("1. ì¼ë°˜ ë¦¬ìŠ¤íŠ¸ ë°©ì‹ (ë©”ëª¨ë¦¬ & ì†ë„ ì¸¡ì •)")

    start_time = time.time()  # ì‹œìž‘ ì‹œê°„ ê¸°ë¡
    
    # ë¦¬ìŠ¤íŠ¸ ìƒì„± ë° ì´í•© ê³„ì‚°
    list_data = create_even_square_list(TARGET_N)
    list_total = sum(list_data)
    
    end_time = time.time()    # ì¢…ë£Œ ì‹œê°„ ê¸°ë¡
    
    # ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼
    list_duration = end_time - start_time
    list_memory = get_memory_usage(list_data)
    
    print(f" -> ì´í•© ê²°ê³¼: {list_total:,}")
    print(f" -> ì†Œìš” ì‹œê°„: {list_duration:.5f} sec")
    print(f" -> ë©”ëª¨ë¦¬ ì‚¬ìš©: {list_memory:.2f} MB")


    # ---------------------------------------------------------
    # 2. ì œë„ˆë ˆì´í„°(Generator) ë°©ì‹ ì„±ëŠ¥ ì¸¡ì •
    # ---------------------------------------------------------
    print_section_title("2. ì œë„ˆë ˆì´í„° ë°©ì‹ (ë©”ëª¨ë¦¬ & ì†ë„ ì¸¡ì •)")

    start_time = time.time()  # ì‹œìž‘ ì‹œê°„ ê¸°ë¡
    
    # ì œë„ˆë ˆì´í„° ìƒì„± (ì´ë•ŒëŠ” ì—°ì‚° ì•ˆ í•¨)
    gen_data = even_square_gen(TARGET_N)
    
    # [ì‹¤ìŠµ ê³¼ì œ 2] ì´í•© ê³„ì‚° (ì´ë•Œ ë£¨í”„ ëŒë©´ì„œ ì—°ì‚° ìˆ˜í–‰)
    gen_total = sum(gen_data)
    
    end_time = time.time()    # ì¢…ë£Œ ì‹œê°„ ê¸°ë¡

    # ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼
    gen_duration = end_time - start_time
    
    # ì£¼ì˜: ì œë„ˆë ˆì´í„°ëŠ” ì´ë¯¸ ì†Œì§„ë˜ì—ˆìœ¼ë¯€ë¡œ, ë©”ëª¨ë¦¬ ì¸¡ì •ì„ ìœ„í•´ ê°ì²´ë¥¼ ë‹¤ì‹œ ìƒì„±í•´ì„œ í™•ì¸
    gen_memory = get_memory_usage(even_square_gen(TARGET_N))
    
    print(f" -> ì´í•© ê²°ê³¼: {gen_total:,}")
    print(f" -> ì†Œìš” ì‹œê°„: {gen_duration:.5f} sec")
    print(f" -> ë©”ëª¨ë¦¬ ì‚¬ìš©: {gen_memory:.6f} MB") # ë§¤ìš° ìž‘ìœ¼ë¯€ë¡œ ì†Œìˆ˜ì  6ìžë¦¬ê¹Œì§€ í‘œì‹œ


    # ---------------------------------------------------------
    # 3. [ì‹¤ìŠµ ê³¼ì œ 3] ìµœì¢… ë¹„êµ ë¦¬í¬íŠ¸
    # ---------------------------------------------------------
    print_section_title("3. ìµœì¢… ë¹„êµ ë¶„ì„ ë¦¬í¬íŠ¸")

    print(f"âœ… ë°ì´í„° ì •í•©ì„± í™•ì¸(ì´í•© ì¼ì¹˜ ì—¬ë¶€): {list_total == gen_total}")
    
    # ë©”ëª¨ë¦¬ ì ˆê° íš¨ê³¼ ê³„ì‚° (ë¦¬ìŠ¤íŠ¸ ë©”ëª¨ë¦¬ / ì œë„ˆë ˆì´í„° ë©”ëª¨ë¦¬)
    # ì œë„ˆë ˆì´í„° ë©”ëª¨ë¦¬ê°€ 0ì— ê°€ê¹Œìš°ë¯€ë¡œ ë‚˜ëˆ—ì…ˆ ì—ëŸ¬ ë°©ì§€ìš© ë¡œì§ í•„ìš”í•˜ë‚˜, ì—¬ê¸°ì„  ë‹¨ìˆœ ë¹„êµ
    print(f"ðŸ“‰ ë©”ëª¨ë¦¬ ì°¨ì´: ë¦¬ìŠ¤íŠ¸ê°€ ì œë„ˆë ˆì´í„°ë³´ë‹¤ í›¨ì”¬ ë§Žì€ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.")
    print(f"   - List: {list_memory:.2f} MB")
    print(f"   - Gen : {gen_memory:.6f} MB (ê±°ì˜ 0ì— ê°€ê¹Œì›€)")
    
    print(f"â±ï¸ ì†ë„ ì°¨ì´:")
    print(f"   - List: {list_duration:.5f} sec")
    print(f"   - Gen : {gen_duration:.5f} sec")
    print("\n[ê²°ë¡ ] ì œë„ˆë ˆì´í„°ëŠ” 'ë©”ëª¨ë¦¬ íš¨ìœ¨'ì´ ì••ë„ì ìœ¼ë¡œ ì¢‹ìœ¼ë‚˜,")
    print("       ë§¤ë²ˆ yieldë¡œ ë©ˆì·„ë‹¤ ì‹¤í–‰í•˜ëŠ” ì˜¤ë²„í—¤ë“œë¡œ ì¸í•´ 'ì†ë„'ëŠ” ë¦¬ìŠ¤íŠ¸ì™€ ë¹„ìŠ·í•˜ê±°ë‚˜ ì•½ê°„ ëŠë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.")

    print("\n>>> í”„ë¡œê·¸ëž¨ ì‹¤í–‰ ì¢…ë£Œ")